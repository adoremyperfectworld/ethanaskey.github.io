<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Ethan's Compositions</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="stylesheet" href="css/styles.css" />
    <!-- GSAP CDN -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>
  </head>

  <body>
    <header class="photos-header">
      <a href="index.html" class="home-link">home</a>
    </header>

    <div class="wordmark">
      <h1>ethan</h1>
      <h1>rodrigoaskey</h1>
    </div>

    <section class="compositions-container">
      <div class="scroll-reveal-container">
        <div class="scroll-reveal-image">
          <img src="img/goinginsane.jpg" alt="First composition" class="gallery-img" />
        </div>
      </div>
      
      <div class="scroll-reveal-container">
        <div class="scroll-reveal-image">
          <img src="img/edit5.jpg" alt="Second composition" class="gallery-img" />
        </div>
      </div>
    </section>

    <footer>
      <h1>
        thank you for visiting.<br />
        Inquiries/collaborations/commissions:<br />
        ethanaskey@icloud.com<br />
        #twothreesixfiveonethreefouroneninetwo
      </h1>
    </footer>

    <script>
      // Register ScrollTrigger plugin
      gsap.registerPlugin(ScrollTrigger);

      // GSAP animations for composition images
      gsap.utils.toArray('.gallery-img').forEach((img, index) => {
        gsap.set(img, {
          y: 50,
          opacity: 0,
          scale: 0.9
        });

        gsap.to(img, {
          y: 0,
          opacity: 1,
          scale: 1,
          duration: 1.2,
          ease: "power2.out",
          scrollTrigger: {
            trigger: img,
            start: "top 85%",
            end: "bottom 15%",
            toggleActions: "play none none reverse"
          }
        });
      });

      // Original scroll reveal functionality
      document.addEventListener('DOMContentLoaded', () => {
        const revealContainers = document.querySelectorAll('.scroll-reveal-container');
        
        const scrollReveal = () => {
          revealContainers.forEach(container => {
            const containerTop = container.getBoundingClientRect().top;
            const containerBottom = container.getBoundingClientRect().bottom;
            const windowHeight = window.innerHeight;
            
            // Calculate how far the container is through the viewport
            const scrollProgress = 1 - (containerTop / (windowHeight - container.offsetHeight));
            
            // Only animate when container is in view
            if (containerTop < windowHeight && containerBottom > 0) {
              const image = container.querySelector('.scroll-reveal-image');
              const translateY = Math.max(0, Math.min(30, 30 * (1 - scrollProgress)));
              const scale = Math.max(1, Math.min(1.1, 1 + (0.1 * scrollProgress)));
              
              image.style.transform = `translateY(${translateY}%) scale(${scale})`;
              container.style.opacity = Math.max(0, Math.min(1, scrollProgress * 2));
            }
          });
        };

        // Initial check
        scrollReveal();
        
        // Add scroll event listener
        window.addEventListener('scroll', scrollReveal);
      });
    </script>
  </body>
</html>
